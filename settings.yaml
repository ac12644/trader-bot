exchange:
  name: "binance"
  testnet: true

trading:
  symbols: ["BTC/USDT", "ETH/USDT"]
  leverage: 3
  max_leverage: 5
  starting_capital: 5000.0

risk:
  risk_per_trade_pct: 1.5
  daily_loss_cap_pct: 5.0
  weekly_loss_cap_pct: 12.0
  max_concurrent_positions: 3
  max_same_direction_correlated: 1
  max_total_exposure_pct: 40.0
  max_total_open_risk_pct: 6.0
  consecutive_loss_cooldown_count: 3
  consecutive_loss_cooldown_hours: 2
  drawdown_reduction_threshold_pct: 15.0
  drawdown_halt_threshold_pct: 25.0

strategy:
  breakout:
    lookback_candles: 20
    volume_multiplier: 2.0
    atr_period: 14
    stop_atr_multiplier: 1.5
    take_profit_r: 2.0
    trailing_start_r: 1.0
    trailing_atr_multiplier: 2.0
    max_entries_per_symbol_per_day: 1
    # Pullback params
    pullback_1h_lookback: 20
    pullback_max_bars: 36
    pullback_min_retrace_pct: 40
    pullback_ema_period: 9

  funding_arb:
    entry_rate_threshold: 0.0002 # 0.02% per 8h (enters ~6% of time)
    exit_rate_threshold: 0.0 # only exit when rate hits zero/negative
    negative_rate_exit: true
    basis_blowout_pct: 0.02 # 2%
    max_holding_hours: 720 # 30 days
    min_holding_hours: 72 # 3 days (accumulate 9+ funding payments)
    notional_per_position: 750.0 # $750 matched notional

  multi_asset_funding:
    symbols:
      - "BTC/USDT"
      - "ETH/USDT"
      - "SOL/USDT"
      - "BNB/USDT"
      - "XRP/USDT"
      - "DOGE/USDT"
      - "ADA/USDT"
      - "AVAX/USDT"
      - "LINK/USDT"
      - "DOT/USDT"
      - "UNI/USDT"
      - "NEAR/USDT"
      - "ARB/USDT"
      - "OP/USDT"

filters:
  trend:
    ema_fast: 21
    ema_slow: 55
  chop:
    adx_threshold: 20
    atr_percentile_threshold: 25
    atr_percentile_window_days: 30
    consecutive_failure_pause_hours: 4
    consecutive_failure_count: 3
  session:
    blackout_periods_utc:
      - start: "00:00"
        end: "04:00"
        days: ["mon", "tue", "wed", "thu", "fri"]
      - start: "04:00"
        end: "06:00"
        days: ["sat", "sun"]
  event:
    pre_event_blackout_minutes: 30
    post_event_blackout_minutes: 15
    emergency_close_swing_pct: 3.0

execution:
  max_holding_hours: 8
  stale_position_hours: 4
  stale_position_min_r: 0.5
  max_total_daily_entries: 6

backtest:
  fee_taker_pct: 0.05
  fee_maker_pct: 0.02
  slippage_entry_pct: 0.04
  slippage_exit_pct: 0.02
  include_funding: false
  monte_carlo_runs: 1000
  monte_carlo_max_dd_95_pct: 30.0
  walk_forward_train_months: 6
  walk_forward_test_months: 2
  start_date: "2024-02-12"
  end_date: "2026-02-12"

spot_fees:
  spot_fee_taker_pct: 0.10
  spot_fee_maker_pct: 0.10

live:
  poll_interval_seconds: 300
  funding_check_seconds: 300
  max_slippage_pct: 0.1
  order_timeout_seconds: 30
  position_file: "positions.json"

scaling:
  phases:
    - min_trades: 0
      risk_pct: 1.5
      max_leverage: 3
    - min_trades: 50
      min_profit_factor: 1.3
      risk_pct: 2.0
      max_leverage: 3
    - min_trades: 100
      min_profit_factor: 1.4
      max_drawdown_pct: 15.0
      risk_pct: 2.5
      max_leverage: 5
    - min_trades: 200
      min_profit_factor: 1.5
      min_sharpe: 1.0
      risk_pct: 3.0
      max_leverage: 5
